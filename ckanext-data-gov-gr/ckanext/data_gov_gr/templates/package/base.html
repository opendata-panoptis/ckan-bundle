{% ckan_extends %}

{% block subtitle %}
  {% set current_type = dataset_type or (pkg.type if pkg else 'dataset') %}
  {% if current_type == 'data-service' %}
    {{ h.humanize_entity_type('package', current_type, 'page title') }}
  {% else %}
    {{ super() }}
  {% endif %}
{% endblock %}

{% block breadcrumb_content %}
  {% set current_type = dataset_type or (pkg.type if pkg else 'dataset') %}
  {% if current_type == 'data-service' %}
    {% if pkg %}
      {% set dataset = h.dataset_display_name(pkg) %}
      {% if pkg.organization %}
        {% set organization = h.get_translated(pkg.organization, 'title') or pkg.organization.name %}
        {% set group_type = pkg.organization.type %}
        <li>{% link_for h.humanize_entity_type('organization', group_type, 'breadcrumb') or _('Organizations'), named_route=group_type ~ '.index' %}</li>
        <li>{% link_for organization|truncate(30), named_route=group_type ~ '.read', id=pkg.organization.name, title=organization %}</li>
      {% else %}
        <li>{% link_for h.humanize_entity_type('package', current_type, 'main nav'), named_route=current_type ~ '.search' %}</li>
      {% endif %}
      <li{{ self.breadcrumb_content_selected() }}>{% link_for dataset|truncate(30), named_route=pkg.type ~ '.read', id=pkg.name, title=dataset %}</li>
    {% else %}
      <li>{% link_for h.humanize_entity_type('package', current_type, 'main nav'), named_route=current_type ~ '.search' %}</li>
      <li class="active"><a href="">{{ h.humanize_entity_type('package', current_type, 'create label') }}</a></li>
    {% endif %}
  {% else %}
    {{ super() }}
  {% endif %}
{% endblock %}
