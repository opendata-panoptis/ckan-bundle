{% if c.options['organization'] == None %}
  <ul>
    <li>{% trans %}Total datasets{% endtrans %}: {{ c.data['total_packages'] }}</li>
  </ul>
  <div class="report-table-wrapper">
    <table class="table table-striped table-bordered table-condensed tablesorter" id="report-table">
      <thead>
        <tr>
          <th>{% trans %}Organization{% endtrans %}</th>
          <th>{% trans %}Datasets{% endtrans %}</th>
          <th>{% trans %}Overall MQA Score{% endtrans %}</th>
          <th>{% trans %}Findability{% endtrans %}</th>
          <th>{% trans %}Accessibility{% endtrans %}</th>
          <th>{% trans %}Interoperability{% endtrans %}</th>
          <th>{% trans %}Reusability{% endtrans %}</th>
          <th>{% trans %}Contextuality{% endtrans %}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in c.data['table'] %}
          <tr>
            <td>{{ h.link_to(row['organization_title'], h.report__relative_url_for(organization=row['organization_name'])) }}</td>
            <td>{{ row['total_packages'] }}</td>
            <td>{% if row['overall_score'] is not none %}{{ row['overall_score'] }}%{% else %}{% trans %}No MQA score{% endtrans %}{% endif %}</td>
            <td>{% if row.get('mqa_findability_score') is not none %}{{ row['mqa_findability_score']|int if row['mqa_findability_score'] == row['mqa_findability_score']|int else row['mqa_findability_score'] }}/100{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_accessibility_score') is not none %}{{ row['mqa_accessibility_score']|int if row['mqa_accessibility_score'] == row['mqa_accessibility_score']|int else row['mqa_accessibility_score'] }}/100{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_interoperability_score') is not none %}{{ row['mqa_interoperability_score']|int if row['mqa_interoperability_score'] == row['mqa_interoperability_score']|int else row['mqa_interoperability_score'] }}/110{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_reusability_score') is not none %}{{ row['mqa_reusability_score']|int if row['mqa_reusability_score'] == row['mqa_reusability_score']|int else row['mqa_reusability_score'] }}/75{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_contextuality_score') is not none %}{{ row['mqa_contextuality_score']|int if row['mqa_contextuality_score'] == row['mqa_contextuality_score']|int else row['mqa_contextuality_score'] }}/20{% else %}-{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

{% else %}

  <ul>
    <li>{% trans %}Total datasets{% endtrans %}: {{ c.data['num_packages'] }}</li>
    <li>{% trans %}Overall MQA Score{% endtrans %}: {% if c.data['overall_score'] is not none %}{{ c.data['overall_score'] }}%{% else %}{% trans %}No MQA score{% endtrans %}{% endif %}</li>
  </ul>
  <div class="report-table-wrapper">
    <table class="table table-striped table-bordered table-condensed tablesorter" id="report-table">
      <thead>
        <tr>
          <th>{% trans %}Dataset{% endtrans %}</th>
          <th>{% trans %}Notes{% endtrans %}</th>
          <th>{% trans %}Overall MQA Score{% endtrans %}</th>
          <th>{% trans %}Findability{% endtrans %}</th>
          <th>{% trans %}Accessibility{% endtrans %}</th>
          <th>{% trans %}Interoperability{% endtrans %}</th>
          <th>{% trans %}Reusability{% endtrans %}</th>
          <th>{% trans %}Contextuality{% endtrans %}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in c.data['table'] %}
          <tr>
            <td>
              <a href="/dataset/{{ row['dataset_name'] }}" title="{{ row['dataset_title'] }}">
                {{ row['dataset_title'] }}
              </a>
            </td>
            <td>{{row['dataset_notes'] }}</td>
            <td>{% if row['mqa_quality_score'] is not none %}{{ row['mqa_quality_score'] }}%{% else %}{% trans %}No MQA score{% endtrans %}{% endif %}</td>
            <td>{% if row.get('mqa_findability_score') is not none %}{{ row['mqa_findability_score']|int if row['mqa_findability_score'] == row['mqa_findability_score']|int else row['mqa_findability_score'] }}/100{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_accessibility_score') is not none %}{{ row['mqa_accessibility_score']|int if row['mqa_accessibility_score'] == row['mqa_accessibility_score']|int else row['mqa_accessibility_score'] }}/100{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_interoperability_score') is not none %}{{ row['mqa_interoperability_score']|int if row['mqa_interoperability_score'] == row['mqa_interoperability_score']|int else row['mqa_interoperability_score'] }}/110{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_reusability_score') is not none %}{{ row['mqa_reusability_score']|int if row['mqa_reusability_score'] == row['mqa_reusability_score']|int else row['mqa_reusability_score'] }}/75{% else %}-{% endif %}</td>
            <td>{% if row.get('mqa_contextuality_score') is not none %}{{ row['mqa_contextuality_score']|int if row['mqa_contextuality_score'] == row['mqa_contextuality_score']|int else row['mqa_contextuality_score'] }}/20{% else %}-{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}
